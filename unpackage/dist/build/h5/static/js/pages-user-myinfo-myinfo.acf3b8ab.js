(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-myinfo-myinfo"],{"06fe":function(t,e,n){"use strict";n.r(e);var a=n("ac82"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},"0df1":function(t,e,n){var a=n("d289");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("586b0d26",a,!0,{sourceMap:!1,shadowMode:!1})},"23d3":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.register=i,e.resetPassword=r,e.updateMemberInfo=o,e.uploadAvatar=u,e.updatePassword=s;var a=n("9b15");function i(t){return(0,a.request)({url:"/lejuClient/member/register",method:"post",data:t})}function r(t){return(0,a.request)({url:"/lejuClient/member/resetPassword/".concat(t),method:"post"})}function o(t){return(0,a.request)({url:"/lejuClient/member/updateMemberInfo",data:t,method:"post"})}function u(t){return(0,a.request)({url:"/lejuClient/login/uploadAvatar",data:t,method:"post"})}function s(t){return(0,a.request)({url:"/lejuClient/member/updatePassword",data:t,method:"post"})}},4762:function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-form",{on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.formSubmit.apply(void 0,arguments)},reset:function(e){arguments[0]=e=t.$handleEvent(e),t.formReset.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"userInfo"},[n("v-uni-view",{staticClass:"row row1"},[n("v-uni-text",{staticClass:"left"},[t._v("用户头像")]),t.isUpdate?[t.icon?n("v-uni-view",{staticClass:"right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.updataAvatar.apply(void 0,arguments)}}},[n("v-uni-image",{attrs:{src:t.icon,mode:"widthFix"}})],1):n("v-uni-button",{attrs:{type:"primary",size:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.updataAvatar.apply(void 0,arguments)}}},[t._v("上传头像")])]:[n("v-uni-view",{staticClass:"right"},[n("v-uni-image",{attrs:{src:t.userInfo.icon,mode:"widthFix"}})],1)]],2),n("v-uni-view",{staticClass:"row row2"},[n("v-uni-text",{staticClass:"left"},[t._v("用户名")]),t.isUpdate?[n("v-uni-input",{attrs:{type:"text",name:"name",value:t.userInfo.username,placeholder:"请输入修改的用户名"}})]:[n("v-uni-text",{staticClass:"right"},[t._v(t._s(t.userInfo.username))])]],2),n("v-uni-view",{staticClass:"row row3"},[n("v-uni-text",{staticClass:"left"},[t._v("用户昵称")]),t.isUpdate?[n("v-uni-input",{attrs:{type:"text",name:"nickname",value:t.userInfo.nickname,placeholder:"请输入修改的用户昵称"}})]:[n("v-uni-text",{staticClass:"right"},[t._v(t._s(t.userInfo.nickname))])]],2),n("v-uni-view",{staticClass:"row row4"},[n("v-uni-text",{staticClass:"left"},[t._v("手机号")]),t.isUpdate?[n("v-uni-input",{attrs:{type:"text",name:"tel",value:t.userInfo.phone,placeholder:"请输入修改的手机号码"}})]:[n("v-uni-text",{staticClass:"right"},[t._v(t._s(t.userInfo.phone))])]],2)],1),n("v-uni-view",{staticClass:"updateUserInfo"},[n("v-uni-button",{attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isUpdateUserInfo.apply(void 0,arguments)}}},[t.isUpdate?n("v-uni-text",[t._v("取消修改")]):n("v-uni-text",[t._v("修改用户信息")])],1)],1),n("v-uni-view",{staticClass:"loginout"},[t.isUpdate?n("v-uni-button",{attrs:{type:"default","form-type":"submit"}},[t._v("更新")]):n("v-uni-button",{attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loginout.apply(void 0,arguments)}}},[t._v("退出登录")]),t.isUpdate?n("v-uni-button",{staticClass:"reset",attrs:{type:"primary","form-type":"reset"}},[t._v("重置")]):t._e()],1)],1)],1)},r=[]},"49e2":function(t,e,n){"use strict";var a=n("0df1"),i=n.n(a);i.a},"4f4d":function(t,e,n){"use strict";var a=n("4ea4");n("ac1f"),n("466d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("5530")),r=n("2f62"),o={data:function(){return{seconds:3,timer:null}},methods:(0,i.default)((0,i.default)({},(0,r.mapMutations)("m_user",["updateRedirectInfo"])),{},{isLogin:function(t){var e=this,n=this.$store.state["m_user"].token;return!!n||(t.match(/\/goodsubpkg\/goodsDetail\/goodsDetail/)?this.delayNavigate(t):void uni.$confirmMsg({content:"暂未登录，是否立即登录"},(function(){uni.navigateTo({url:"/pages/user/login/login"}),e.updateRedirectInfo({openType:"navigateTo",from:t})})))},showTips:function(t,e){uni.showToast((0,i.default)({icon:"none",title:"请先登录"+t+" 秒后自动跳转到登录页",mask:!0,duration:1500},e))},delayNavigate:function(t){var e=this;this.seconds=3,this.showTips(this.seconds),this.timer=setInterval((function(){if(e.seconds--,e.seconds<=0)return clearInterval(e.timer),uni.navigateTo({url:"/pages/user/login/login",success:function(){e.updateRedirectInfo({openType:"navigateTo",from:t})}}),!1;e.showTips(e.seconds)}),1e3)}})};e.default=o},"9ab5":function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.doLogin=o,e.getMemberInfo=u,e.uploadAvatar=s;var i=a(n("5530")),r=n("9b15");function o(t){return(0,r.request)({url:"/lejuClient/login/doLogin",method:"post",data:t})}function u(t){return(0,r.request)((0,i.default)({url:"/lejuClient/login/getMemberInfo"},t))}function s(t){return(0,r.request)({url:"/lejuClient/login/uploadAvatar",data:t,method:"post"})}},ac82:function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var i=a(n("1da1")),r=a(n("5530")),o=n("2f62"),u=a(n("9fc9")),s=a(n("4f4d")),c=a(n("4dd6")),d=n("23d3"),l=n("9ab5"),f={mixins:[c.default,s.default],data:function(){return{isUpdate:!1,icon:""}},onLoad:function(){this.initValidate({nickname:{required:!0,rangelength:[2,10]}},{nickname:{required:"请输入昵称",rangelength:"昵称在2-10个字符"}})},computed:{userInfo:{get:function(){return this.$store.state["m_user"].userInfo},set:function(t){return this.$store.state["m_user"].userInfo=t}},token:{get:function(){return this.$store.state["m_user"].token},set:function(){}}},methods:(0,r.default)((0,r.default)({},(0,o.mapMutations)("m_user",["updateUserInfo","updateToken"])),{},{formReset:function(t){},isUpdateUserInfo:function(){this.isUpdate=!this.isUpdate},formSubmit:function(t){var e=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var a,i,r,o,u,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log(t),console.log(t),a=t.detail.value,e.WxValidate.checkForm(a)){n.next=8;break}i=e.WxValidate.errorList[0],uni.$showMsg({title:i.msg}),n.next=21;break;case 8:return r={icon:e.icon,isDisabled:0,nickname:a.nickname,phone:a.tel,sex:0,username:a.name,id:e.userInfo.id},n.next=11,(0,d.updateMemberInfo)(r);case 11:return o=n.sent,o.data,n.next=15,(0,l.getMemberInfo)({header:{token:e.token}});case 15:if(u=n.sent,s=u.data,s.success){n.next=19;break}return n.abrupt("return",uni.$showMsg());case 19:e.updateUserInfo(s.data.userInfo),uni.reLaunch({url:"../user"});case 21:case"end":return n.stop()}}),n)})))()},loginout:function(){this.updateToken(""),this.updateUserInfo({}),this.isLogin("/pages/user/user")},updataAvatar:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:uni.chooseImage({count:1,success:function(e){uni.uploadFile({url:u.default+"/lejuClient/login/uploadAvatar",filePath:e.tempFilePaths[0],name:"file",success:function(e){t.icon=JSON.parse(e.data).data.fileUrl}})}});case 1:case"end":return e.stop()}}),e)})))()}})};e.default=f},b740:function(t,e,n){"use strict";n.r(e);var a=n("4762"),i=n("06fe");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("49e2");var o,u=n("f0c5"),s=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,"c760ca7a",null,!1,a["a"],o);e["default"]=s.exports},d289:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.userInfo .row[data-v-c760ca7a]{height:%?166?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:%?2?% solid #bbb;padding:0 %?40?%}.userInfo .row1 .right[data-v-c760ca7a]{width:%?114?%;height:%?114?%;overflow:hidden;-webkit-border-radius:50%;border-radius:50%}.userInfo .row1 .right uni-image[data-v-c760ca7a]{width:100%;height:100%}.updateUserInfo[data-v-c760ca7a],\n.loginout[data-v-c760ca7a]{width:80%;margin:%?20?% auto}.updateUserInfo uni-button[data-v-c760ca7a],\n.loginout uni-button[data-v-c760ca7a]{color:#fff}.updateUserInfo uni-button[data-v-c760ca7a]{background-color:#999}.loginout uni-button[data-v-c760ca7a]{background-color:#354e44}.loginout .reset[data-v-c760ca7a]{margin-top:%?30?%;background-color:#3f536e}',""]),t.exports=e}}]);