(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["minesubpkg/orderBack/orderBack"],{"349c":function(e,t,r){},"38c5":function(e,t,r){"use strict";var n=r("349c"),a=r.n(n);a.a},"6e73":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r("a34a")),a=s(r("9fc9")),o=s(r("8d39")),u=r("dc9a"),i=r("19af");function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return m(e)||l(e)||f(e)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if(e){if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function l(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function m(e){if(Array.isArray(e))return p(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t,r,n,a,o,u){try{var i=e[o](u),s=i.value}catch(c){return void r(c)}i.done?t(s):Promise.resolve(s).then(n,a)}function g(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function u(e){h(o,n,a,u,i,"next",e)}function i(e){h(o,n,a,u,i,"throw",e)}u(void 0)}))}}var b={mixins:[o.default],data:function(){return{orderItems:[],orderBase:{},array:[],addressNameArr:[],index:0,isChange:!0,imgList:[],skuId:"",orderId:"",num:1}},methods:{bindPickerChange:function(e){this.isChange=!1,this.index=e.detail.value},formSubmit:function(t){var r=this;return g(n.default.mark((function o(){var u,s,c,d,f,l;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(u=t.detail.value,!isNaN(Number(u.count.trim()))&&"number"===typeof Number(u.count.trim())&&u.count.trim()){n.next=3;break}return n.abrupt("return",e.$showMsg({title:"请输入合法的有效数值"}));case 3:if(!(Number(u.count.trim())<0||Number(u.count.trim())>r.num)){n.next=5;break}return n.abrupt("return",e.$showMsg({title:"请输入合法的退款数量"}));case 5:if(u.reason.trim()){n.next=7;break}return n.abrupt("return",e.$showMsg({title:"请输入退货原因"}));case 7:if(u.description.trim()){n.next=9;break}return n.abrupt("return",e.$showMsg({title:"请输入问题描述"}));case 9:return s=[],r.imgList.forEach((function(t){var r=new Promise((function(r){e.uploadFile({url:a.default+"/lejuClient/orderReturn/uploadImg",filePath:t.path,name:"file",success:function(e){r(e)}})}));s.push(r)})),n.next=13,Promise.all(s);case 13:return c=n.sent,s=c.map((function(e){return JSON.parse(e.data).data.fileUrl})),d={companyAddressId:r.array[r.index].id,count:u.count,description:u.description,orderId:r.orderId,orderItemId:r.orderItemId,proofPics:s.join(","),reason:u.reason},n.next=18,(0,i.addOrderReturnApply)(d);case 18:if(f=n.sent,l=f.data,l.success){n.next=22;break}return n.abrupt("return",e.$showMsg({title:l.message}));case 22:e.$showMsg({title:"退款成功，等待商家处理",duration:2e3}),setTimeout((function(){r.delayNavigate("switchTab","../../pages/user/user","个人中心")}),2e3);case 24:case"end":return n.stop()}}),o)})))()},formReset:function(e){this.isChange=!0},handleRemoveImg:function(e){this.imgList.splice(e,1)},handleChooseImg:function(){var t=this;e.chooseImage({success:function(r){var n,a=r.tempFiles;if(r.tempFiles.length>3)e.$showMsg({title:"图片数量超出三张，请重新选择"});else{var o=a.find((function(e){return e.size>1048576}));o?e.$showMsg({title:"选择的图片大小大于1m,请重新选择"}):r.tempFiles.length+t.imgList.length>3?e.$showMsg({title:"选择的图片总数量超出3张，请重新上传"}):(n=t.imgList).push.apply(n,c(a))}}})}},onLoad:function(t){var r=this;return g(n.default.mark((function a(){var o,s,c,d;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r.num=t.num,r.orderItemId=t.orderItemId,r.orderId=t.orderId,n.next=5,(0,u.getPreOrderById)(t.orderId);case 5:if(o=n.sent,s=o.data,s.success){n.next=9;break}return n.abrupt("return",e.$showMsg());case 9:return s.data.orderItems.forEach((function(e){e.productAttr=JSON.parse(e.productAttr)})),r.orderItems=s.data.orderItems,r.orderBase=s.data.orderBase,n.next=14,(0,i.getCompanyAddrss)();case 14:if(c=n.sent,d=c.data,d.success){n.next=18;break}return n.abrupt("return",e.$showMsg());case 18:r.array=d.data.items,r.addressNameArr=d.data.items.map((function(e){return e.addressName}));case 20:case"end":return n.stop()}}),a)})))()}};t.default=b}).call(this,r("543d")["default"])},a576:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return n}));var n={myGood:function(){return r.e("components/my-good/my-good").then(r.bind(null,"b389"))},myImg:function(){return r.e("components/my-img/my-img").then(r.bind(null,"a884"))}},a=function(){var e=this,t=e.$createElement;e._self._c},o=[]},ad59:function(e,t,r){"use strict";r.r(t);var n=r("6e73"),a=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},d750:function(e,t,r){"use strict";r.r(t);var n=r("a576"),a=r("ad59");for(var o in a)"default"!==o&&function(e){r.d(t,e,(function(){return a[e]}))}(o);r("38c5");var u,i=r("f0c5"),s=Object(i["a"])(a["default"],n["b"],n["c"],!1,null,"c3c9e6d0",null,!1,n["a"],u);t["default"]=s.exports},f0a6:function(e,t,r){"use strict";(function(e){r("2494");n(r("66fd"));var t=n(r("d750"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])}},[["f0a6","common/runtime","common/vendor"]]]);